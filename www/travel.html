<!DOCTYPE html>
<html>

<head>
    <title>Travel Distance</title>
    <meta name="viewport" content="user-scalable=yes, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height" />
    <link rel="stylesheet" type='text/css' href="bootstrap/css/bootstrap.css">
    <link rel="stylesheet" type='text/css' href="css/semantic.css">
    <style type="text/css">
        .map {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0px;
            left: 0px;
            overflow: hidden;
        }

        .over_map {
            position: absolute;
            padding: 10px;
            z-index: 9999;
        }

    </style>
</head>

<body>
    <div id="googleMap" class="map"></div>
    <div class="over_map">
        <i id="btnPlay" class="ui icon play circle big green"></i>
        <i id="btnStop" class="ui icon stop circle big red"></i>
    </div>
</body>

</html>
<script type="text/javascript" src="js/jquery1.11.1-min.js"></script>
<script type="text/javascript" src="bootstrap/js/bootstrap.js"></script>
<script type="text/javascript" src="js/semantic.js"></script>
<script type="text/javascript">
    var coords = [],
        colors = ["#38c6f3", "#4a5ba9", "#ff4864", "#166048", "#291f09", "#800000", "#0000ff", "#ff0000", "#512411", "#e3af0c"];
    var gstartmarkers = [],
        gendmarkers = [],
        gtourplans = [],
        path = [];
    var map, infowindow, startPoint, prevPoint, endPoint, endMarker, prevLatLng, rotation, route, tripPath, flag, i = 0;
    var car = "M17.402,0H5.643C2.526,0,0,3.467,0,6.584v34.804c0,3.116,2.526,5.644,5.643,5.644h11.759c3.116,0,5.644-2.527,5.644-5.644 V6.584C23.044,3.467,20.518,0,17.402,0z M22.057,14.188v11.665l-2.729,0.351v-4.806L22.057,14.188z M20.625,10.773 c-1.016,3.9-2.219,8.51-2.219,8.51H4.638l-2.222-8.51C2.417,10.773,11.3,7.755,20.625,10.773z M3.748,21.713v4.492l-2.73-0.349 V14.502L3.748,21.713z M1.018,37.938V27.579l2.73,0.343v8.196L1.018,37.938z M2.575,40.882l2.218-3.336h13.771l2.219,3.336H2.575z M19.328,35.805v-7.872l2.729-0.355v10.048L19.328,35.805z";

    function initMap() {
        $("#btnStop").hide();
        var mapProp = {
            center: new google.maps.LatLng(14.2599286, 80.1137635),
            zoom: 17,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            panControl: false,
            zoomControl: false,
            scaleControl: false,
            mapTypeControl: false,
            streetViewControl: false,
            overviewMapControl: false,
            rotateControl: false
        };
        map = new google.maps.Map(document.getElementById("googleMap"), mapProp);

        var tourPlan = [
            /*{lat:14.259252, lng:80.114189},
            {lat:14.259355, lng:80.113772},
            {lat:14.259487, lng:80.113226},
            {lat:14.259612, lng:80.112657},
            {lat:14.260274, lng:80.112869},
            {lat:14.261002, lng:80.113067},
            {lat:14.261627, lng:80.113256},
            {lat:14.262274, lng:80.113484},
            {lat:14.262001, lng:80.113947},
            {lat:14.261700, lng:80.114508},
            {lat:14.261509, lng:80.114925},
            {lat:14.261141, lng:80.114834},
            {lat:14.260230, lng:80.114523},
            {lat:14.259818, lng:80.114387},
            {lat:14.259494, lng:80.114296},
            {lat:14.259656, lng:80.113818},
            {lat:14.259855, lng:80.113840}*/
            "14.252586599999999,80.11863735", "14.252593816666668,80.11866445000001", "14.252584100000002,80.11869738333333", "14.2525773,80.1187266", "14.252570533333335,80.11875126666668", "14.252565433333332,80.11877774999999", "14.252558916666665,80.11880576666667", "14.252550799999998,80.11883606666667", "14.252547116666666,80.11886741666667", "14.25254335,80.11890936666667", "14.252541599999999,80.11894775", "14.252547716666667,80.11898531666667", "14.252559,80.11902431666667", "14.25257315,80.11906428333333", "14.25258945,80.1191013", "14.252608750000002,80.11913335", "14.252636233333332,80.11916468333334", "14.252661166666666,80.11920149999999", "14.252690883333333,80.11923921666667", "14.25272055,80.11927721666666", "14.252754450000001,80.11931331666666", "14.252784999999998,80.11934463333334", "14.252794950000002,80.11935375", "14.252797566666667,80.11935431666667", "14.252811383333334,80.11936586666667", "14.252828849999998,80.11937961666666", "14.252846133333332,80.11939916666667", "14.252867416666668,80.11942675", "14.25288545,80.11946379999999", "14.252893566666668,80.11950895", "14.252901349999998,80.11955233333333", "14.252903916666666,80.11960181666667", "14.252902816666666,80.11966858333334", "14.252890749999999,80.11974351666666", "14.252870183333334,80.11982115", "14.252845383333332,80.11990978333333", "14.252804933333334,80.12003131666667", "14.252765933333334,80.12016725", "14.252724599999999,80.12030296666667", "14.252676583333335,80.12044343333334", "14.25262385,80.12059606666666", "14.252572566666666,80.12075413333334", "14.252526616666668,80.12090433333333", "14.252482249999998,80.12105596666667", "14.252438033333332,80.1212005", "14.252393933333334,80.12134828333333", "14.252349183333335,80.12149441666666", "14.252300716666666,80.12164076666666", "14.25225085,80.12178730000001", "14.252205866666667,80.12192725", "14.252162099999998,80.12208426666666", "14.252127166666666,80.12223765", "14.252100166666667,80.12238825", "14.252071533333332,80.12253846666667", "14.252056450000001,80.12266213333334", "14.252037583333333,80.12276908333334", "14.252026999999998,80.12285746666666", "14.252007816666666,80.12294573333334", "14.251984883333334,80.12304909999999", "14.25196575,80.12315199999999", "14.251936283333334,80.12327806666667", "14.251915066666667,80.12341251666666", "14.251893283333334,80.12354475000001", "14.251874533333334,80.12368053333333", "14.251855683333334,80.12382063333332", "14.2518414,80.12396288333333", "14.251824683333332,80.12410716666666", "14.251804250000001,80.12424703333333", "14.251780683333333,80.12439146666667", "14.251757183333332,80.12453476666666", "14.25173125,80.12467343333333", "14.25170508333333,80.12481703333333", "14.251685466666666,80.12495555000001", "14.251662883333331,80.12509456666666", "14.251647949999999,80.12523689999999", "14.251633766666664,80.12537640000001", "14.251620766666667,80.12552393333334", "14.251609283333334,80.12565835000001", "14.251594866666668,80.12578495", "14.251579816666666,80.12591076666666", "14.25156315,80.12603188333333", "14.251549633333331,80.12615045", "14.251533099999998,80.12626426666667", "14.251516883333332,80.12638103333333", "14.2515009,80.12650236666667", "14.251490316666665,80.12662428333333", "14.251528033333333,80.12672633333334", "14.251604483333331,80.12680789999999", "14.251700933333332,80.12691166666667", "14.251809783333332,80.12701323333334", "14.251931416666666,80.12710985", "14.252078,80.1272045", "14.252233333333333,80.12730563333334", "14.2523835,80.12740666666667", "14.252535,80.12751421666667", "14.252692566666667,80.127627", "14.252852483333333,80.12774376666667", "14.253012550000001,80.12786001666667", "14.253171766666666,80.12797006666666", "14.253337633333334,80.12807038333334", "14.253504100000002,80.12817371666667", "14.2536697,80.12827776666667", "14.253835016666669,80.12838206666667", "14.254004750000002,80.12848611666666", "14.254176133333333,80.12858016666668", "14.254332,80.12866853333334", "14.254463466666667,80.12876118333334", "14.254590533333332,80.12885871666667", "14.254733816666665,80.12892326666666", "14.254888516666664,80.1289683", "14.255040783333333,80.12900025", "14.25519395,80.1290137", "14.255357166666666,80.12903373333333", "14.255505583333335,80.12906938333334", "14.25565485,80.12911551666666", "14.255802016666667,80.12916655000001", "14.255935183333333,80.1292243", "14.256068983333334,80.12928238333333", "14.256205116666669,80.12934793333334", "14.256336333333335,80.12940853333333", "14.256452216666666,80.12945289999999", "14.256556683333335,80.1294755", "14.2566528,80.12947901666666", "14.256738949999999,80.12948243333334", "14.256836266666669,80.12948495", "14.256938616666666,80.12948718333334", "14.257033733333333,80.12949743333334", "14.257118716666666,80.12951245", "14.257204116666665,80.1295339", "14.257293483333335,80.12955261666666", "14.25739545,80.12955856666667", "14.257496050000002,80.12956089999999", "14.25760925,80.12956015", "14.257725349999998,80.12956205", "14.257840483333332,80.12956155", "14.257952816666666,80.12956221666667", "14.258062933333333,80.1295667", "14.258169866666666,80.12956986666667", "14.258278366666666,80.12957303333333", "14.258387833333332,80.12957305", "14.258503733333335,80.12957028333334", "14.25861005,80.12956863333334", "14.258718583333332,80.12956851666667", "14.258824150000002,80.1295624", "14.258926033333333,80.12955771666667", "14.25902068333333,80.12955685", "14.2591065,80.12955475", "14.259190533333333,80.1295502", "14.259270966666667,80.12954541666666", "14.259338849999999,80.12953201666666", "14.25939385,80.12950113333333", "14.2594407,80.12945601666667", "14.259473516666667,80.12939225", "14.25949665,80.12932195", "14.259517200000001,80.12925301666668", "14.259538816666668,80.12917763333333", "14.259562850000002,80.1291016", "14.259590383333334,80.12903248333333", "14.259616583333331,80.12897163333334", "14.259638050000001,80.12891601666666", "14.259657233333334,80.1288639", "14.259668516666666,80.12881945000001", "14.259675166666666,80.12877485", "14.259685600000001,80.12873415", "14.259699049999998,80.12869931666667", "14.259698683333333,80.12869015", "14.259695299999999,80.12869415", "14.259685950000001,80.12870145000001", "14.259657883333334,80.12868301666667", "14.259641766666668,80.1286782", "14.2596421,80.12866708333333", "14.259645216666668,80.1286477", "14.259646733333334,80.12862681666667", "14.259651883333333,80.12860591666666", "14.259658400000001,80.12858821666667", "14.259664433333334,80.12857363333333", "14.259671399999998,80.12855911666666", "14.2596796,80.12854324999999", "14.25968515,80.12852965", "14.259692083333334,80.12851211666666", "14.259699066666666,80.12849403333333", "14.259704466666669,80.12847556666667", "14.2597111,80.12845533333333", "14.259719883333332,80.12843464999999", "14.259727733333333,80.12841128333334", "14.2597355,80.12838983333333", "14.259741049999999,80.12837368333334", "14.259746233333333,80.1283546", "14.2597517,80.12832896666667", "14.259759033333333,80.12829938333333", "14.259766466666667,80.12826985", "14.259775816666668,80.12823755", "14.259787100000002,80.12820118333335", "14.259798633333332,80.12816445", "14.259805649999999,80.12813118333334", "14.259814533333333,80.12809021666666", "14.259826066666669,80.1280424", "14.259834616666668,80.12799153333334", "14.259847566666668,80.12793293333334", "14.259873466666667,80.12787028333334", "14.25991765,80.12782228333334", "14.259976533333335,80.12778913333334", "14.260045916666664,80.12776213333333", "14.260125866666666,80.12774181666667", "14.260219383333332,80.12772785", "14.260371466666667,80.12770694999999", "14.260497549999998,80.12770693333333", "14.260610933333332,80.12770415", "14.260712716666667,80.12770586666667", "14.26080465,80.12771411666667", "14.2608973,80.12772515", "14.26099911666667,80.12774046666667", "14.261107,80.12775183333333", "14.261212949999999,80.12776211666666", "14.261326283333336,80.12777030000001", "14.261440866666666,80.12777888333333", "14.261554566666666,80.12778901666667", "14.261673816666667,80.12780591666666", "14.261794866666666,80.12782456666667", "14.261919783333333,80.12783513333333", "14.262041666666669,80.1278442", "14.262170800000002,80.12786188333332", "14.262282383333336,80.12788823333334", "14.262398933333335,80.12790583333334", "14.262519816666668,80.12791485", "14.262644283333335,80.12791941666666", "14.262765166666668,80.12792456666666", "14.262888816666669,80.12791806666668", "14.263010933333332,80.12789381666667", "14.263133566666665,80.12785306666666", "14.263256966666665,80.12779943333334", "14.263381250000002,80.12773295000001", "14.26349325,80.12765666666665", "14.263602749999999,80.12757358333333", "14.263710083333335,80.12748928333333", "14.263813383333336,80.12740151666667", "14.26390135,80.12730405", "14.263980166666666,80.12720085", "14.26404655,80.12710451666666", "14.2640954,80.12700960000001", "14.264146750000002,80.12690769999999", "14.264193733333332,80.12681389999999", "14.264242933333332,80.12672141666667", "14.264295766666665,80.12663083333334", "14.264361049999998,80.12655928333334", "14.264436983333333,80.12648798333333", "14.264497866666666,80.12640826666667", "14.264535816666667,80.12634186666668", "14.26456828333333,80.12628538333334", "14.264602700000001,80.12623371666668", "14.264635033333331,80.12618706666667", "14.264661966666665,80.12614441666666", "14.264682816666667,80.12610825", "14.264703200000001,80.12607461666667", "14.26471015,80.12606258333334", "14.264710333333335,80.12605888333333", "14.264717183333335,80.12604343333334", "14.264732866666668,80.12601486666668", "14.264756183333335,80.12597681666666", "14.264782883333332,80.12592436666667", "14.264811633333332,80.12586603333332", "14.264841950000001,80.12580493333333", "14.264875416666666,80.1257383", "14.264916233333334,80.12566698333333", "14.264967233333333,80.1255939", "14.265031299999999,80.12553131666667", "14.26510315,80.12547875", "14.265189433333335,80.12544196666666", "14.265327116666667,80.12543878333332", "14.265457266666665,80.12544941666667", "14.265582300000002,80.12545468333333", "14.265703016666665,80.12545771666667", "14.265810749999998,80.12545938333332", "14.265911283333333,80.12546166666667", "14.265998566666667,80.12546703333334", "14.266079383333333,80.12547481666667", "14.266162683333334,80.12547931666667", "14.266250233333334,80.1254792", "14.266336333333333,80.12547598333335", "14.26641945,80.12547339999999", "14.266499266666665,80.12547163333333", "14.266576833333334,80.12547011666668", "14.26664745,80.12547096666667", "14.26670805,80.12546819999999", "14.266755066666667,80.12546351666667", "14.266787733333334,80.12545645", "14.266808066666666,80.12545261666668", "14.266820533333336,80.12545256666667", "14.26682535,80.12545351666667", "14.266818149999999,80.12545548333333", "14.266831349999999,80.12545976666667", "14.26686985,80.1254623", "14.266920999999998,80.12545048333332", "14.266975583333332,80.12542603333333", "14.267026016666668,80.12539324999999", "14.267072399999998,80.12535651666667", "14.267109433333333,80.12531631666667", "14.267144083333335,80.12526028333333", "14.267182600000002,80.12520116666666", "14.267212199999998,80.12514965", "14.267245733333334,80.12510309999999", "14.267278216666666,80.12506626666666", "14.267308033333332,80.12503663333334", "14.267299633333334,80.12502283333333", "14.267308766666668,80.12500685", "14.267329216666667,80.12498786666667", "14.267357316666669,80.12497185000001", "14.267383416666666,80.124966", "14.26740825,80.12496025", "14.2674265,80.12496236666667", "14.267442850000002,80.12497458333334", "14.267454649999998,80.12498465", "14.267463999999999,80.12499438333333", "14.267474533333333,80.12500121666667", "14.267484249999999,80.12501234999999", "14.267484266666667,80.12501493333333", "14.267485616666667,80.12502785", "14.267487200000001,80.12505011666667", "14.26748445,80.12507305000001", "14.267477533333333,80.12509655000001", "14.267477383333334,80.12509768333332", "14.26747935,80.12510261666667", "14.26747605,80.12509153333333", "14.267471633333333,80.12507751666666", "14.267453933333336,80.12506081666668", "14.267446183333334,80.12505211666667", "14.267442549999998,80.12504478333334", "14.267433933333333,80.12503658333334", "14.267425883333333,80.12502721666667", "14.267419700000001,80.12501886666668", "14.267416183333333,80.12501223333334", "14.267416916666665,80.12501298333333", "14.267417966666669,80.12500728333333", "14.267424433333334,80.12500108333333", "14.267430066666668,80.12498703333334", "14.267432316666667,80.12497268333333", "14.267435566666666,80.12496250000001", "14.267435666666666,80.12496205000001", "14.267442966666666,80.12496128333333", "14.267452583333332,80.12495898333333", "14.267457983333335,80.12495681666665", "14.26745695,80.12495143333334", "14.2674426,80.12495466666665", "14.267416933333333,80.12497096666667", "14.267396350000002,80.12499026666666", "14.26737605,80.12501040000001", "14.267351933333336,80.12503186666666"
        ];

        tripPath = new google.maps.Polyline({
            geodesic: true,
            strokeColor: 'red',
            strokeOpacity: 1.0,
            strokeWeight: 2
        });

        endMarker = new google.maps.Marker({
            //position: new google.maps.LatLng(tourPlan[tourPlan.length - 1].split(',')[0], tourPlan[tourPlan.length - 1].split(',')[1]),
            /*icon: {
                path: car,
                //url: 'img/map-marker-icon-red.png',
                scaledSize: new google.maps.Size(25, 30), // size
                origin: new google.maps.Point(0, 0), // origin
                anchor: new google.maps.Point(10, 25), // anchor
                fillColor: "teal",
                fillOpacity: 1,
            },*/
            draggable: false,
            map: map
        });

        //debugger;
        tripPath.setMap(map);

        route = function() {
            //debugger;
            if (flag == 1) {
                if (i == tourPlan.length) {
                    i = 0;
                    path = [];
                    tripPath.setPath(path);
                    endMarker.setPosition(null);
                    endMarker.setIcon(null);
                } else {
                    //debugger;
                    var myLatLng = new google.maps.LatLng(tourPlan[i].split(',')[0], tourPlan[i].split(',')[1]);
                    if (i > 0) {
                        prevLatLng = new google.maps.LatLng(tourPlan[i - 1].split(',')[0], tourPlan[i - 1].split(',')[1]);
                        rotation = google.maps.geometry.spherical.computeHeading(prevLatLng, myLatLng);
                    }

                    var markerRed = {
                        path: car,
                        //url: 'img/map-marker-icon-red.png',
                        scaledSize: new google.maps.Size(25, 30), // size
                        origin: new google.maps.Point(0, 0), // origin
                        anchor: new google.maps.Point(10, 25), // anchor
                        fillColor: "red",
                        fillOpacity: 1,
                        rotation: rotation,
                        scale: .5
                    };

                    var markerGreen = {
                        path: car,
                        //url: 'img/map-marker-icon-red.png',
                        scaledSize: new google.maps.Size(25, 30), // size
                        origin: new google.maps.Point(0, 0), // origin
                        anchor: new google.maps.Point(10, 25), // anchor
                        fillColor: "teal",
                        fillOpacity: 1,
                        rotation: rotation,
                        scale: .5
                    };

                    path.push(new google.maps.LatLng(tourPlan[i].split(',')[0], tourPlan[i].split(',')[1]));

                    tripPath.setPath(path);
                    endMarker.setPosition(myLatLng);
                    endMarker.setIcon(markerRed);

                    i = parseInt(i) + 1;
                }
            }
        };

        $("#btnPlay").click(function() {
            flag = 1;
            $("#btnPlay").hide();
            $("#btnStop").show();
            setInterval(route, 1000);
        });
        $("#btnStop").click(function() {
            flag = 0;
            $("#btnPlay").show();
            $("#btnStop").hide();
            clearInterval(route);
        });
    }
    $(document).ready(function() {
        $("#btnStop").hide();
    });

</script>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?v=3.exp&key=AIzaSyAvCB0fJALK-4VaEiubgiVYuh-pJxNGvH0&callback=initMap&libraries=geometry,drawing" async defer></script>
